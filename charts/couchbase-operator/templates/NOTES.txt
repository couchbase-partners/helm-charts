
----------------
Installing, downloading or otherwise using this software is subject to the Couchbase, Inc. License Agreement posted at https://www.couchbase.com/LA08242020 

A license for Couchbase Server Enterprise Edition is required to use the Helm Chart.
----------------

{{- if .Values.install.couchbaseOperator }}
== Couchbase-operator deployed.
   # Check the couchbase-operator logs
   kubectl logs -f deployment/{{ template "couchbase-operator.fullname" . }}  --namespace {{ .Release.Namespace }}
{{- end }}

{{ if .Values.install.admissionController }}
== Admission-controller deployed.
   # Check the admission-controller logs
   kubectl logs -f deployment/{{ template "admission-controller.fullname" . }} --namespace {{ .Release.Namespace }}
{{- end }}

{{- if .Values.install.couchbaseCluster }}

{{- if .Values.cluster.logging.server.enabled }}

== Couchbase-operator server log management deployed.
   # Check the couchbase server logs
   kubectl  --namespace {{ .Release.Namespace }} logs -f {{ printf "%s-0000" (include "couchbase-lib.cluster.name" .) }} logging
{{- end }}

== Connect to Admin console
{{- if (include "couchbase-cluster.tls.enabled" .) }}
{{- if .Values.cluster.networking.dns }}
   {{ printf "https://console.%s:18091" .Values.cluster.networking.dns.domain }}
{{- else }}
   kubectl port-forward --namespace {{ .Release.Namespace }} {{ printf "%s-0000" (include "couchbase-lib.cluster.name" .) }} 18091:18091

   # open https://localhost:18091
{{- end -}}
{{- else }}
   kubectl port-forward --namespace {{ .Release.Namespace }} {{ printf "%s-0000" (include "couchbase-lib.cluster.name" .) }} 8091:8091

   # open http://localhost:8091
{{- end }}
   username: {{ .Values.cluster.security.username }}
   password: {{ .Values.cluster.security.password }}
{{- end -}}

== Manage this chart
   # Upgrade Couchbase
   helm upgrade {{ .Release.Name }} -f <values.yaml> couchbase/couchbase-operator

   # Show this status again
   helm status {{ .Release.Name }}
